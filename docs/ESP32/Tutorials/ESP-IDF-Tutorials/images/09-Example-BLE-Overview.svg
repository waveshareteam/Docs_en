<svg width="1400" height="900" viewBox="0 0 700 450" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="700" height="430" fill="#f8f9fa"/>
  
  <!-- ESP32 Profile Area -->
  <rect x="50" y="20" width="280" height="330" rx="8" fill="none" stroke="#495057" stroke-width="2"/>
  <text x="70" y="45" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#495057">ESP32-S3 (Peripheral)</text>
  <text x="70" y="60" font-family="Arial, sans-serif" font-size="11" fill="#6c757d">Device Name: NimBLE_GATT</text>
  
  <!-- Service 1: Heart Rate Service -->
  <rect x="70" y="75" width="240" height="120" rx="6" fill="#f1f3f4" stroke="#6c757d" stroke-width="1.5"/>
  <text x="80" y="95" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#343a40">Service</text>
  <text x="80" y="110" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">Heart Rate Service</text>
  <text x="80" y="123" font-family="Arial, sans-serif" font-size="8" fill="#868e96">UUID: 0x180D (SIG Standard)</text>
  
  <!-- Characteristic 1.1: Heart Rate Measurement -->
  <rect x="85" y="135" width="210" height="50" rx="4" fill="#e9ecef" stroke="#6c757d" stroke-width="1"/>
  <text x="95" y="150" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#343a40">Characteristic</text>
  <text x="95" y="165" font-family="Arial, sans-serif" font-size="8" fill="#868e96">UUID: 0x2A37 (Heart Rate Measurement)</text>
  <text x="95" y="178" font-family="Arial, sans-serif" font-size="9" fill="#868e96">Properties: Read, Indicate</text>
  
  <!-- Service 2: Automation IO Service -->
  <rect x="70" y="205" width="240" height="120" rx="6" fill="#f1f3f4" stroke="#6c757d" stroke-width="1.5"/>
  <text x="80" y="225" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#343a40">Service</text>
  <text x="80" y="240" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">Automation IO Service</text>
  <text x="80" y="253" font-family="Arial, sans-serif" font-size="8" fill="#868e96">UUID: 0x1815 (SIG Standard)</text>
  
  <!-- Characteristic 2.1: LED Control -->
  <rect x="85" y="265" width="210" height="50" rx="4" fill="#e9ecef" stroke="#6c757d" stroke-width="1"/>
  <text x="95" y="280" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#343a40">Characteristic</text>
  <text x="95" y="295" font-family="Arial, sans-serif" font-size="8" fill="#868e96">UUID: 00001525-...-D123 (LED)</text>
  <text x="95" y="308" font-family="Arial, sans-serif" font-size="9" fill="#868e96">Properties: Write</text>
  
  <!-- Hardware Connection Area -->
  <rect x="50" y="370" width="280" height="47" rx="6" fill="#f1f3f4" stroke="#6c757d" stroke-width="1.5"/>
  <text x="60" y="390" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#343a40">Hardware Connection</text>
  <text x="60" y="407" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">WS2812 LED → ESP32-S3 GPIO 21</text>
  
  <!-- Mobile Device Area -->
  <rect x="420" y="20" width="230" height="330" rx="8" fill="none" stroke="#495057" stroke-width="2"/>
  <text x="440" y="45" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#495057">Mobile Phone (Central)</text>
  <text x="440" y="60" font-family="Arial, sans-serif" font-size="11" fill="#6c757d">Debug Tool: LightBlue</text>
  
  <!-- Mobile Operation Steps -->
  <rect x="440" y="75" width="190" height="75" rx="6" fill="#f1f3f4" stroke="#6c757d" stroke-width="1.5"/>
  <text x="450" y="95" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#343a40">Operation Steps</text>
  <text x="450" y="112" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">1. Scan &amp; Connect to NimBLE_GATT</text>
  <text x="450" y="127" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">2. Discover Services &amp; Characteristics</text>
  <text x="450" y="142" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">3. Read/Write/Subscribe</text>
  
  <!-- Mobile Control Panel 1: Heart Rate -->
  <rect x="440" y="160" width="190" height="80" rx="6" fill="#f1f3f4" stroke="#6c757d" stroke-width="1.5"/>
  <text x="450" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#343a40">Read Heart Rate</text>
  <text x="450" y="197" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">• Read: Get current heart rate</text>
  <text x="450" y="212" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">• Subscribe: Auto-receive updates</text>
  <text x="450" y="227" font-family="Arial, sans-serif" font-size="9" fill="#868e96">(Format: 1-byte uint)</text>
  
  <!-- Mobile Control Panel 2: LED -->
  <rect x="440" y="250" width="190" height="85" rx="6" fill="#f1f3f4" stroke="#6c757d" stroke-width="1.5"/>
  <text x="450" y="270" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#343a40">Control LED</text>
  <text x="450" y="287" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">• Write 0x00: Turn LED OFF</text>
  <text x="450" y="302" font-family="Arial, sans-serif" font-size="10" fill="#6c757d">• Write 0x01: Turn LED ON</text>
  <text x="450" y="317" font-family="Arial, sans-serif" font-size="9" fill="#868e96">(Format: 1-byte uint)</text>

  <!-- Connection Arrow Definitions -->
  <defs>
    <marker id="arrowhead-small-v2" markerWidth="7" markerHeight="5" 
            refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#6c757d" />
    </marker>
  </defs>
  
  <!-- Write Command Arrow (Mobile -> ESP32 LED) -->
  <line x1="420" y1="290" x2="330" y2="290" stroke="#6c757d" stroke-width="1.5" marker-end="url(#arrowhead-small-v2)"/>
  <text x="365" y="285" font-family="Arial, sans-serif" font-size="9" fill="#495057">Write</text>
  
  <!-- Read Status Arrow (ESP32 HR -> Mobile) -->
  <line x1="330" y1="150" x2="420" y2="150" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="3,3" marker-end="url(#arrowhead-small-v2)"/>
  <text x="365" y="145" font-family="Arial, sans-serif" font-size="9" fill="#495057">Read</text>
  
  <!-- Indicate/Notify Arrow (ESP32 HR -> Mobile) -->
  <line x1="330" y1="175" x2="420" y2="175" stroke="#6c757d" stroke-width="1.5" stroke-dasharray="1,2" marker-end="url(#arrowhead-small-v2)"/>
  <text x="335" y="190" font-family="Arial, sans-serif" font-size="9" fill="#495057">Indicate (Subscribe)</text>
  
  <!-- ESP32 Hardware Control Arrow -->
  <line x1="190" y1="350" x2="190" y2="370" stroke="#6c757d" stroke-width="1.2" marker-end="url(#arrowhead-small-v2)"/>
  
</svg>